import{a as h,S as y,i as g}from"./assets/vendor-09d7c26e.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function e(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=e(o);fetch(o.href,r)}})();const p="42772780-849d5e67a8b9b0ab7e6b7483b",L="https://pixabay.com/api/",b={async fetchImages(t,n=1,e=15){try{const s=await h.get(L,{params:{key:p,q:t,image_type:"photo",orientation:"horizontal",safesearch:!0,page:n,per_page:e}});if(s.data.hits.length===0)throw new Error("No images found");return s.data}catch(s){throw console.error("Error fetching images:",s),s}}};function u(t){const n=document.querySelector(".gallery"),e=document.querySelector(".load-more-btn");if(!n||!e){console.error("Gallery list or Load more button not found");return}const s=t.map(r=>`
    <li class="gallery-item">
      <a href="${r.largeImageURL}" class="gallery-link">
        <img src="${r.webformatURL}" alt="${r.tags}" class="gallery-image" />
      </a>
      <div class="gallery-item-info">
        <div class="info-item">Likes: ${r.likes}</div>
        <div class="info-item">Views: ${r.views}</div>
        <div class="info-item">Comments: ${r.comments}</div>
        <div class="info-item">Downloads: ${r.downloads}</div>
      </div>
    </li>
  `).join("");n.innerHTML+=s,new y(".gallery a").refresh(),t.length>0&&e.classList.remove("hidden")}function v(){const t=document.querySelector(".gallery");t?t.innerHTML="":console.error("Gallery list not found")}function f(){const t=document.querySelector(".loader");t?t.classList.add("visible"):console.error("Loader not found")}function c(){const t=document.querySelector(".loader");t?t.classList.remove("visible"):console.error("Loader not found")}function w(){g.info({title:"Info",message:"We're sorry, but you've reached the end of search results."})}const S=document.querySelector(".search-form"),d=document.querySelector(".load-more-btn");let l=1,i="";async function m(t,n){try{f();const e=await b.fetchImages(t,n);u(e.hits),c(),(e.hits.length<15||e.hits.length+(n-1)*15>=e.totalHits)&&(d.classList.add("hidden"),e.hits.length+(n-1)*15>=e.totalHits&&w());const s=document.querySelectorAll(".gallery-item");if(s.length){const{height:o}=s[0].getBoundingClientRect();window.scrollBy({top:o*2,behavior:"smooth"})}}catch(e){console.error("Error fetching images:",e),c()}}S.addEventListener("submit",async t=>{t.preventDefault();const e=t.target.querySelector(".search-input").value.trim();e&&e!==i&&(i=e,l=1,v(),d.classList.add("hidden"),m(i,l)),f();try{const s=await pixabayApi.fetchImages(e);u(s)}catch(s){handleError(s)}finally{c()}});d.addEventListener("click",()=>{l+=1,m(i,l)});
//# sourceMappingURL=commonHelpers.js.map
