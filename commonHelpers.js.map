{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '42772780-849d5e67a8b9b0ab7e6b7483b';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport default {\n  async fetchImages(query, page = 1, perPage = 15) {\n    try {\n      const response = await axios.get(BASE_URL, {\n        params: {\n          key: API_KEY,\n          q: query,\n          image_type: 'photo',\n          orientation: 'horizontal',\n          safesearch: true,\n          page,\n          per_page: perPage,\n        },\n      });\n\n      if (response.data.hits.length === 0) {\n        throw new Error('No images found');\n      }\n\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching images:', error);\n      throw error;\n    }\n  },\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nfunction renderGallery(images) {\n  const galleryList = document.querySelector('.gallery');\n  const loadMoreBtn = document.querySelector('.load-more-btn');\n\n  if (!galleryList || !loadMoreBtn) {\n    console.error('Gallery list or Load more button not found');\n    return;\n  }\n\n  const galleryItems = images.map(image => `\n    <li class=\"gallery-item\">\n      <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"gallery-image\" />\n      </a>\n      <div class=\"gallery-item-info\">\n        <div class=\"info-item\">Likes: ${image.likes}</div>\n        <div class=\"info-item\">Views: ${image.views}</div>\n        <div class=\"info-item\">Comments: ${image.comments}</div>\n        <div class=\"info-item\">Downloads: ${image.downloads}</div>\n      </div>\n    </li>\n  `).join('');\n\n  galleryList.innerHTML += galleryItems;\n\n  const lightbox = new SimpleLightbox('.gallery a');\n  lightbox.refresh();\n\n  if (images.length > 0) {\n    loadMoreBtn.classList.remove('hidden');\n  }\n}\n\nfunction clearGallery() {\n  const galleryList = document.querySelector('.gallery');\n  if (galleryList) {\n    galleryList.innerHTML = '';\n  } else {\n    console.error('Gallery list not found');\n  }\n}\n\nfunction showLoader() {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.classList.add('visible');\n  } else {\n    console.error('Loader not found');\n  }\n}\n\nfunction hideLoader() {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.classList.remove('visible');\n  } else {\n    console.error('Loader not found');\n  }\n}\n\nfunction handleError(error) {\n  console.error('Error:', error);\n  showErrorMessage('An error occurred. Please try again later.');\n}\n\nfunction showErrorMessage(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n  });\n}\n\nfunction showWarning(message) {\n  iziToast.warning({\n    title: 'Warning',\n    message: message,\n  });\n}\n\nfunction showEndMessage() {\n  iziToast.info({\n    title: 'Info',\n    message: \"We're sorry, but you've reached the end of search results.\",\n  });\n}\n\nexport {\n  renderGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  handleError,\n  showWarning,\n  showEndMessage\n};\n","import PixabayAPI from './js/pixabay-api.js';\nimport {\n  renderGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  handleError,\n  showEndMessage,\n} from './js/render-functions.js';\n\nconst searchForm = document.querySelector('.search-form');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nlet currentPage = 1;\nlet currentQuery = '';\n\nasync function fetchAndRenderImages(query, page) {\n  try {\n    showLoader();\n    const data = await PixabayAPI.fetchImages(query, page);\n    renderGallery(data.hits);\n    hideLoader();\n\n    if (data.hits.length < 15 || data.hits.length + (page - 1) * 15 >= data.totalHits) {\n      loadMoreBtn.classList.add('hidden');\n      if (data.hits.length + (page - 1) * 15 >= data.totalHits) {\n        showEndMessage();\n      }\n    }\n\n    const galleryItems = document.querySelectorAll('.gallery-item');\n    if (galleryItems.length) {\n      const { height } = galleryItems[0].getBoundingClientRect();\n      window.scrollBy({\n        top: height * 2,\n        behavior: 'smooth',\n      });\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    handleError(error);\n  } finally {\n    hideLoader();\n  }\n}\n\nsearchForm.addEventListener('submit', async (event) => {\n  event.preventDefault();\n  const input = event.target.querySelector('.search-input');\n  const query = input.value.trim();\n  if (query && query !== currentQuery) {\n    currentQuery = query;\n    currentPage = 1;\n    clearGallery();\n    loadMoreBtn.classList.add('hidden');\n    await fetchAndRenderImages(currentQuery, currentPage);\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  currentPage += 1;\n  await fetchAndRenderImages(currentQuery, currentPage);\n});\n"],"names":["API_KEY","BASE_URL","PixabayAPI","query","page","perPage","response","axios","error","renderGallery","images","galleryList","loadMoreBtn","galleryItems","image","SimpleLightbox","clearGallery","showLoader","loader","hideLoader","handleError","showErrorMessage","message","iziToast","showEndMessage","searchForm","currentPage","currentQuery","fetchAndRenderImages","data","height","event"],"mappings":"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"}